DROP TABLE IF EXISTS "COURSE_PERSON";
DROP TABLE IF EXISTS "COURSE";
DROP TABLE IF EXISTS "PERSON";
DROP TABLE IF EXISTS "USER";

CREATE TABLE "USER" (
  "ID" INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "USERNAME" VARCHAR(64) NOT NULL,
  "ADMINISTRATOR" BOOLEAN DEFAULT 0 NOT NULL,
  "HASH" VARCHAR(64),
  "EMAIL" VARCHAR(256),
  "APIKEY" VARCHAR(64),
  "LOCKED" BOOLEAN DEFAULT 0 NOT NULL,
  "FORCE_PASSWORD_CHANGE" BOOLEAN DEFAULT 0 NOT NULL,
  "EXPIRES" DATE
);

INSERT INTO "USER" ("ID", "USERNAME", "ADMINISTRATOR", "HASH") VALUES (1, 'admin', 1, '$2a$10$iiwt9.KFFYLHaIJTrhMH..xIduQS2jSJAcj.7v123prhYG7UgL54.');
INSERT INTO "USER" ("ID", "USERNAME", "ADMINISTRATOR", "HASH") VALUES (2, 'stuart', 0, '$2a$10$axuMX9WrGc4j6q0ifC06K.fv1L7wrfKH5RTrHycp7FqjKJxrKTvde');
INSERT INTO "USER" ("ID", "USERNAME", "ADMINISTRATOR", "HASH") VALUES (3, 'morag', 0, '$2a$10$axuMX9WrGc4j6q0ifC06K.fv1L7wrfKH5RTrHycp7FqjKJxrKTvde');

CREATE TABLE "COURSE" (
  "ID" INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "OWNER_ID" INTEGER DEFAULT NULL REFERENCES "USER"("ID"),
  "IDENTIFIER" VARCHAR(255) NOT NULL,
  "TITLE" VARCHAR(255) NOT NULL,
  UNIQUE ("OWNER_ID", "IDENTIFIER")
);

INSERT INTO "COURSE" ("ID", "OWNER_ID", "IDENTIFIER", "TITLE") VALUES (1, NULL, 'CM2006', 'Interface Design');
INSERT INTO "COURSE" ("ID", "OWNER_ID", "IDENTIFIER", "TITLE") VALUES (2, NULL, 'CM2007', 'Intranet Systems Development');
INSERT INTO "COURSE" ("ID", "OWNER_ID", "IDENTIFIER", "TITLE") VALUES (3, NULL, 'CM3010', 'Information Retrieval');
INSERT INTO "COURSE" ("ID", "OWNER_ID", "IDENTIFIER", "TITLE") VALUES (4, NULL, 'AA1003', 'Multimedia Programming');
INSERT INTO "COURSE" ("ID", "OWNER_ID", "IDENTIFIER", "TITLE") VALUES (5, 2, 'CMM511', 'Information Retrieval Systems');
INSERT INTO "COURSE" ("ID", "OWNER_ID", "IDENTIFIER", "TITLE") VALUES (6, 3, 'CMM511', 'Information Retrieval Systems');

CREATE TABLE "PERSON" (
  "ID" INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "OWNER_ID" INTEGER DEFAULT NULL REFERENCES "USER"("ID"),
  "IDENTIFIER" VARCHAR(255) NOT NULL,
  "ROLE" INTEGER NOT NULL,
  "GIVEN_NAME" VARCHAR(255) NOT NULL,
  "FAMILY_NAME" VARCHAR(255) NOT NULL,
  UNIQUE ("OWNER_ID", "IDENTIFIER")
);

INSERT INTO "PERSON" ("ID", "OWNER_ID", "IDENTIFIER", "ROLE", "GIVEN_NAME", "FAMILY_NAME") VALUES (1, NULL, '09000231', 1, 'Gwenda', 'Blane');
INSERT INTO "PERSON" ("ID", "OWNER_ID", "IDENTIFIER", "ROLE", "GIVEN_NAME", "FAMILY_NAME") VALUES (2, NULL, '09000232', 1, 'Fred', 'Zucker');
INSERT INTO "PERSON" ("ID", "OWNER_ID", "IDENTIFIER", "ROLE", "GIVEN_NAME", "FAMILY_NAME") VALUES (3, NULL, '09000233', 1, 'Caitlyn', 'Respass');
INSERT INTO "PERSON" ("ID", "OWNER_ID", "IDENTIFIER", "ROLE", "GIVEN_NAME", "FAMILY_NAME") VALUES (4, NULL, '09000234', 1, 'Luke', 'Naccarato');
INSERT INTO "PERSON" ("ID", "OWNER_ID", "IDENTIFIER", "ROLE", "GIVEN_NAME", "FAMILY_NAME") VALUES (5, NULL, '09000235', 1, 'Pierre', 'Busse');
INSERT INTO "PERSON" ("ID", "OWNER_ID", "IDENTIFIER", "ROLE", "GIVEN_NAME", "FAMILY_NAME") VALUES (6, NULL, '09000236', 1, 'Ami', 'Montalvo');
INSERT INTO "PERSON" ("ID", "OWNER_ID", "IDENTIFIER", "ROLE", "GIVEN_NAME", "FAMILY_NAME") VALUES (7, NULL, '09000237', 1, 'Jackie', 'Nicolas');
INSERT INTO "PERSON" ("ID", "OWNER_ID", "IDENTIFIER", "ROLE", "GIVEN_NAME", "FAMILY_NAME") VALUES (8, 2, '09000238', 1, 'Quincy', 'Kilgore');
INSERT INTO "PERSON" ("ID", "OWNER_ID", "IDENTIFIER", "ROLE", "GIVEN_NAME", "FAMILY_NAME") VALUES (9, 3, '09000238', 1, 'Quincy', 'Jones');
INSERT INTO "PERSON" ("ID", "OWNER_ID", "IDENTIFIER", "ROLE", "GIVEN_NAME", "FAMILY_NAME") VALUES (10, NULL, 'M4000061', 2, 'Zena', 'Beatrice');
INSERT INTO "PERSON" ("ID", "OWNER_ID", "IDENTIFIER", "ROLE", "GIVEN_NAME", "FAMILY_NAME") VALUES (11, NULL, 'M4000062', 2, 'Levi', 'Evert');
INSERT INTO "PERSON" ("ID", "OWNER_ID", "IDENTIFIER", "ROLE", "GIVEN_NAME", "FAMILY_NAME") VALUES (12, NULL, 'M4000063', 2, 'Jeanie', 'Denman');
INSERT INTO "PERSON" ("ID", "OWNER_ID", "IDENTIFIER", "ROLE", "GIVEN_NAME", "FAMILY_NAME") VALUES (13, 2, 'M4000064', 2, 'Monroe', 'Taing');
INSERT INTO "PERSON" ("ID", "OWNER_ID", "IDENTIFIER", "ROLE", "GIVEN_NAME", "FAMILY_NAME") VALUES (14, 3, 'M4000064', 2, 'Monroe', 'Marilyn');

CREATE TABLE "COURSE_PERSON" (
  "ID" INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "COURSE_ID" INTEGER NOT NULL REFERENCES "COURSE"("ID"),
  "PERSON_ID" INTEGER NOT NULL REFERENCES "PERSON"("ID"),
  UNIQUE ("COURSE_ID", "PERSON_ID")
);

INSERT INTO "COURSE_PERSON" ("ID", "COURSE_ID", "PERSON_ID") VALUES (1, 1, 1);
INSERT INTO "COURSE_PERSON" ("ID", "COURSE_ID", "PERSON_ID") VALUES (2, 2, 1);
INSERT INTO "COURSE_PERSON" ("ID", "COURSE_ID", "PERSON_ID") VALUES (3, 1, 2);
INSERT INTO "COURSE_PERSON" ("ID", "COURSE_ID", "PERSON_ID") VALUES (4, 2, 2);
INSERT INTO "COURSE_PERSON" ("ID", "COURSE_ID", "PERSON_ID") VALUES (5, 3, 2);
INSERT INTO "COURSE_PERSON" ("ID", "COURSE_ID", "PERSON_ID") VALUES (6, 1, 3);
INSERT INTO "COURSE_PERSON" ("ID", "COURSE_ID", "PERSON_ID") VALUES (7, 3, 3);
INSERT INTO "COURSE_PERSON" ("ID", "COURSE_ID", "PERSON_ID") VALUES (8, 4, 3);
INSERT INTO "COURSE_PERSON" ("ID", "COURSE_ID", "PERSON_ID") VALUES (9, 1, 4);
INSERT INTO "COURSE_PERSON" ("ID", "COURSE_ID", "PERSON_ID") VALUES (10, 2, 4);
INSERT INTO "COURSE_PERSON" ("ID", "COURSE_ID", "PERSON_ID") VALUES (11, 3, 4);
INSERT INTO "COURSE_PERSON" ("ID", "COURSE_ID", "PERSON_ID") VALUES (12, 4, 4);
INSERT INTO "COURSE_PERSON" ("ID", "COURSE_ID", "PERSON_ID") VALUES (13, 1, 5);
INSERT INTO "COURSE_PERSON" ("ID", "COURSE_ID", "PERSON_ID") VALUES (14, 3, 5);
INSERT INTO "COURSE_PERSON" ("ID", "COURSE_ID", "PERSON_ID") VALUES (15, 1, 6);
INSERT INTO "COURSE_PERSON" ("ID", "COURSE_ID", "PERSON_ID") VALUES (16, 2, 6);
INSERT INTO "COURSE_PERSON" ("ID", "COURSE_ID", "PERSON_ID") VALUES (17, 4, 6);
INSERT INTO "COURSE_PERSON" ("ID", "COURSE_ID", "PERSON_ID") VALUES (18, 4, 7);
INSERT INTO "COURSE_PERSON" ("ID", "COURSE_ID", "PERSON_ID") VALUES (19, 5, 8);
INSERT INTO "COURSE_PERSON" ("ID", "COURSE_ID", "PERSON_ID") VALUES (20, 6, 9);
INSERT INTO "COURSE_PERSON" ("ID", "COURSE_ID", "PERSON_ID") VALUES (21, 1, 10);
INSERT INTO "COURSE_PERSON" ("ID", "COURSE_ID", "PERSON_ID") VALUES (22, 4, 10);
INSERT INTO "COURSE_PERSON" ("ID", "COURSE_ID", "PERSON_ID") VALUES (23, 1, 11);
INSERT INTO "COURSE_PERSON" ("ID", "COURSE_ID", "PERSON_ID") VALUES (24, 2, 11);
INSERT INTO "COURSE_PERSON" ("ID", "COURSE_ID", "PERSON_ID") VALUES (25, 1, 12);
INSERT INTO "COURSE_PERSON" ("ID", "COURSE_ID", "PERSON_ID") VALUES (26, 3, 12);
INSERT INTO "COURSE_PERSON" ("ID", "COURSE_ID", "PERSON_ID") VALUES (27, 5, 13);
INSERT INTO "COURSE_PERSON" ("ID", "COURSE_ID", "PERSON_ID") VALUES (28, 6, 14);
